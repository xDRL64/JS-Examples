

<script src="./WRAP_pageRootBackPath.js"></script>

<script src="./start_syntaxHighlighter.js"></script>

<style>
	p {
		tab-size: 4;
		white-space: pre;
		font-family: 'Courier New', Courier, monospace;
		background-color: #222222;
		border-radius: 8px;
	}
	p.code {
		color: rgb(235, 41, 79);
	}
	p.console {
		color: rgb(235, 190, 41);
	}
	h2 {
		margin-top: 64px;
	}
</style>

<body onload="debug_elem.process()">

<h1>Promise</h1>


<h2>One simple promise</h2>

<script class="code" src="">
	
	let asynchronousProcess = function(resolve, reject){

		console.log("start asynchronousProcess at 'new Promise'");

		let lateExecution = function(){

			console.log("lateExecution done");

			resolve();
		};

		setTimeout(lateExecution, 1000);
	};

	let resolveAsCallback = function(){

		console.log("asynchronousProcess has been executed");
	};

	let promise = new Promise(asynchronousProcess);

	promise.then(resolveAsCallback);

	console.log("end of script");
	
</script>

<p class="console">
	start asynchronousProcess at 'new Promise'
	end of script
	lateExecution done
	asynchronousProcess has been executed
</p>


<h2>Two promises in chain</h2>

<script class="code" src="">
	
	let loading_A = function(resolve, reject){

		console.log("A : start loading");

		let lateExecution = function(){
			console.log("A : loaded");
			resolve();
		};

		setTimeout(lateExecution, 1000);
	};

	let loading_B = function(resolve, reject){

		console.log("B : start loading");

		let lateExecution = function(){
			console.log("B : loaded");
			resolve();
		};

		setTimeout(lateExecution, 1000);
	};

	let waitForLoading_A = function(){

		load_B.then(waitForLoading_B);
	};

	let waitForLoading_B = function(){

		console.log("end of promise chain");
	};
	
	let load_A = new Promise(loading_A);
	let load_B = new Promise(loading_B);
	
	load_A.then(waitForLoading_A);
	
	console.log("end of script");
	
</script>



<p class="console">
	A : start loading
	B : start loading
	end of script
	A : loaded
	B : loaded
	end of promise chain
</p>

</body>